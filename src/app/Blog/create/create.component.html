<div class="min-h-screen bg-gray-100 py-8">
  <form (ngSubmit)="onSubmit()"
        class="mx-auto w-full md:w-5/6 lg:w-2/3 max-w-screen-xl
               bg-white p-8 rounded-2xl shadow space-y-6">

    <h2 class="text-2xl font-bold text-center text-gray-800">Crear Publicación</h2>

    <!-- Nombre -->
    <div>
      <label class="block text-gray-700 font-semibold mb-1">Título</label>
      <input type="text" [(ngModel)]="blog.name" name="name" required
        class="w-full border border-gray-300 rounded-lg p-2 focus:ring-2 focus:ring-blue-400 outline-none" />
    </div>

    <!-- Contenido -->
    <div>
      <label class="block text-gray-700 font-semibold mb-1">Contenido</label>
      <div class="rounded-lg border border-gray-300 overflow-hidden">
        <quill-editor [(ngModel)]="blog.content" name="content" [format]="'html'" [modules]="quillModules" theme="snow"
          class="quill-wrapper" style="min-height: 240px">
        </quill-editor>
      </div>
      <p class="mt-1 text-xs text-gray-500">Se guardará como HTML.</p>
    </div>

    <!-- Tipo -->
    <div>
      <label class="block text-gray-700 font-semibold mb-1">Tipo de Publicación</label>
      <select [(ngModel)]="blog.type" name="type"
        class="w-full border border-gray-300 rounded-lg p-2 focus:ring-2 focus:ring-blue-400 outline-none">
        <option *ngFor="let t of publicationTypes" [ngValue]="t">{{ t }}</option>
      </select>
    </div>

    <!-- Estado -->
    <div class="flex items-center space-x-2">
      <input type="checkbox" [(ngModel)]="blog.state" name="state" class="h-4 w-4 text-blue-600" />
      <label class="text-gray-700">¿Publicar ahora?</label>
    </div>

    <!-- Imagen -->
    <div>
      <label class="block text-gray-700 font-semibold mb-2">Imagen (opcional)</label>

      <div class="flex items-center gap-4">
        <label
          class="inline-flex cursor-pointer items-center gap-2 rounded-lg border border-dashed border-gray-300 bg-gray-50 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 24 24" fill="currentColor">
            <path d="M19 13v6H5v-6H3v8h18v-8z"/><path d="M11 2h2v10h3l-4 4-4-4h3z"/>
          </svg>
          <span>Seleccionar imagen</span>
          <input type="file" accept="image/*" (change)="onImageSelected($event)" class="hidden" />
        </label>

        <button *ngIf="preview" type="button" (click)="clearImage()"
                class="rounded-lg border border-gray-300 px-3 py-2 text-sm hover:bg-gray-50">
          Quitar imagen
        </button>
      </div>

      <!-- Preview -->
      <div *ngIf="preview" class="mt-3">
        <img [src]="preview" alt="Preview" class="max-h-48 rounded-lg border border-gray-200 shadow-sm">
        <p class="mt-1 text-xs text-gray-500 break-all">
          (Se enviará como Base64 en <code>blog.image</code>)
        </p>
      </div>

      <!-- Info -->
      <p class="mt-1 text-xs text-gray-500">
        Formatos: JPG/PNG/WebP/GIF. Tamaño recomendado &lt; 2 MB.
      </p>
    </div>

    <!-- Botón -->
    <div class="text-center">
      <button type="submit"
        class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-6 rounded-lg transition">
        Crear Publicación
      </button>
    </div>
  </form>
</div>
